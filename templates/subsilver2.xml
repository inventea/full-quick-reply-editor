<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<?xml-stylesheet type="text/xsl" href="modx.prosilver.en.xsl"?>
<!-- For security purposes, please check: http://www.phpbb.com/mods/ for the latest version of this MOD. Although MODs are checked before being allowed in the MODs Database there is no guarantee that there are no security problems within the MOD. No support will be given for MODs not found within the MODs Database which can be found at http://www.phpbb.com/mods/ -->
<mod xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.phpbb.com/mods/xml/modx-1.2.5.xsd">
	<header>
		<license><![CDATA[http://opensource.org/licenses/gpl-license.php GNU General Public License v2]]></license>
		
		<title lang="en">Full Quick Reply Editor</title>
		
		<description lang="en">Extends basic quick reply editor to the full version with post icons, smilies and BBCode buttons. Adds selective quote function available through default button. Allows users to disable editor in UCP and displays it, if guest posting permissions are set.</description>
		<description lang="pl">Rozszerza podstawowy edytor szybkiej odpowiedzi o ikony posta, emotikony i znaczniki BBCode oraz dodaje funkcję selektywnego cytowania treści, dostępną pod domyślnym przyciskiem. Wyświetla edytor, jeśli ustawione są odpowiednie uprawnienia dla gości oraz pozwala użytkownikom na jego wyłączenie w ustawieniach profilu.</description>
		
		<author-notes lang="en">Works only with phpBB 3.0.6 and above!</author-notes>
		<author-notes lang="pl">Działa wyłącznie na phpBB 3.0.6 i nowszym!</author-notes>
		
		<author-group>
			<author>
				<realname>Jarosław Pustuła</realname>
				<username>medeish</username>
				<homepage>http://inventia.io</homepage>
				<email>office@inventia.io</email>
				<contributions-group>
					<contributions status="current" from="2009-11-26" position="Developer"></contributions>
				</contributions-group>
			</author>
		</author-group>
		
		<mod-version>2.1.1</mod-version>
		
		<installation>
			<level>easy</level>
			<time>600</time>
			<target-version>3.0.8</target-version>
		</installation>
		
		<history>
			<entry>
				<date>2009-11-26</date>
				<rev-version>1.0.0</rev-version>
				<changelog lang="en">
					<change>Initial release</change>
				</changelog>
				<changelog lang="pl">
					<change>Pierwsze wydanie</change>
				</changelog>
			</entry>
			<entry>
				<date>2009-12-24</date>
				<rev-version>1.0.1</rev-version>
				<changelog lang="en">
					<change>Fixed undefined variable notice in debug mode</change>
				</changelog>
				<changelog lang="pl">
					<change>Poprawiono komunikat o niezdefiniowanej zmiennej</change>
				</changelog>
			</entry>
			<entry>
				<date>2010-03-28</date>
				<rev-version>2.0.0</rev-version>
				<changelog lang="en">
					<change>Quick Reply is expanded by default</change>
					<change>Added selective quoting based on phpBB's feature</change>
					<change>Added button to save post draft</change>
					<change>Adjusted to phpBB 3.0.7</change>
					<change>Updated MODX to version 1.2.5</change>
				</changelog>
				<changelog lang="pl">
					<change>Szybka odpowiedź jest domyślnie rozwinięta</change>
					<change>Dodano funkcję cytowania selektywnego, opartą o wbudowany mechanizm</change>
					<change>Dodano przycisk do zapisywania szkicu posta</change>
					<change>Przystosowano do phpBB 3.0.7</change>
					<change>Zaktualizowano MODX do wersji 1.2.5</change>
				</changelog>
			</entry>
			<entry>
				<date>2010-05-04</date>
				<rev-version>2.0.1</rev-version>
				<changelog lang="en">
					<change>Updated instruction to work with newest AutoMOD</change>
					<change>Changed $user->setup() method to $user->add_lang() in viewtopic.php</change>
				</changelog>
				<changelog lang="pl">
					<change>Przystosowano instrukcję dla najnowszego AutoMOD–a</change>
					<change>Zmieniono metodę $user->setup() na $user->add_lang() w pliku viewtopic.php</change>
				</changelog>
			</entry>
			<entry>
				<date>2010-11-04</date>
				<rev-version>2.1.0</rev-version>
				<changelog lang="en">
					<change>Added option in UCP to enable or disable Quick Reply by user</change>
					<change>Removed not necessary BBCode status information</change>
					<change>Quick Reply visible for non-registered users if guest posting is enabled</change>
				</changelog>
				<changelog lang="pl">
					<change>Dodano opcję w panelu zarządzania kontem, pozwalającą użytkownikowi na włączenie lub wyłącznie szybkiej odpowiedzi</change>
					<change>Usunięto zbędne informacje o statusie BBCode</change>
					<change>Szybka odpowiedź widoczna dla niezarejestrowanych użytkowników, jeśli pisanie przez gości jest włączone</change>
				</changelog>
			</entry>
			<entry>
				<date>2010-11-22</date>
				<rev-version>2.1.1</rev-version>
				<changelog lang="en">
					<change>Added missing option in ACP to enable or disable Quick Reply for users</change>
				</changelog>
				<changelog lang="pl">
					<change>Dodano brakującą opcję w panelu administracji, pozwalającą na włączenie lub wyłącznie szybkiej odpowiedzi użytkownikom</change>
				</changelog>
			</entry>
		</history>
		
		<link-group>
			<link type="parent" href="../install.xml" lang="en">install.xml</link>
			<link type="language" href="../languages/de.xml" lang="en">de.xml</link>
			<link type="language" href="../languages/pl.xml" lang="en">pl.xml</link>
		</link-group>
	</header>
	
	<action-group>
		<open src="styles/subsilver2/template/quickreply_editor.html">
			<edit>
				<find><![CDATA[<form method="post" action="{U_QR_ACTION}">]]></find>
				<action type="replace-with"><![CDATA[<form id="postform" method="post" action="{U_QR_ACTION}">]]></action>
			</edit>
			<edit>
				<find><![CDATA[		<tr>
			<th align="center" colspan="2">{L_QUICKREPLY}</th>
		</tr>]]></find>
				<action type="after-add"><![CDATA[		<!-- IF S_DISPLAY_USERNAME -->
			<tr>
				<td class="row1"><b class="genmed">{L_USERNAME}:</b></td>
				<td class="row2"><input class="post" type="text" tabindex="1" name="username" size="25" value="{USERNAME}" /></td>
			</tr>
		<!-- ENDIF -->
		<!-- IF S_SHOW_TOPIC_ICONS -->
		<tr>
			<td class="row1"><b class="genmed">{L_ICON}:</b></td>
			<td class="row2">
				<table width="100%" cellspacing="0" cellpadding="0" border="0">
				<tr>
					<td><input type="radio" class="radio" name="icon" value="0"{S_NO_ICON_CHECKED} /><span class="genmed">{L_NO_TOPIC_ICON}</span> <!-- BEGIN topic_icon --><span style="white-space: nowrap;"><input type="radio" class="radio" name="icon" value="{topic_icon.ICON_ID}"{topic_icon.S_ICON_CHECKED} /><img src="{topic_icon.ICON_IMG}" width="{topic_icon.ICON_WIDTH}" height="{topic_icon.ICON_HEIGHT}" alt="" title="" hspace="2" vspace="2" /></span> <!-- END topic_icon --></td>
				</tr>
				</table>
			</td>
		</tr>
		<!-- ENDIF -->]]></action>
			</edit>
			<edit>
				<find><![CDATA[		<tr>
			<td class="row1" width="22%"><b class="genmed">{L_MESSAGE}:</b></td>
			<td class="row2" valign="top" align="left" width="78%"><textarea name="message" rows="7" cols="76" tabindex="3"  style="width: 98%;"></textarea> </td>
		</tr>]]></find>
				<action type="replace-with"><![CDATA[		<tr>
			<td class="row1" valign="top"><b class="genmed">{L_MESSAGE_BODY}:</b><br /><span class="gensmall">{L_MESSAGE_BODY_EXPLAIN}&nbsp;</span><br /><br />
			<!-- IF S_SMILIES_ALLOWED -->
				<table width="100%" cellspacing="5" cellpadding="0" border="0" align="center">
				<tr>
					<td class="gensmall" align="center"><b>{L_SMILIES}</b></td>
				</tr>
				<tr>
					<td align="center">
						<!-- BEGIN smiley -->
							<a href="#" onclick="insert_text('{smiley.A_SMILEY_CODE}', true); return false;" style="line-height: 20px;"><img src="{smiley.SMILEY_IMG}" width="{smiley.SMILEY_WIDTH}" height="{smiley.SMILEY_HEIGHT}" alt="{smiley.SMILEY_CODE}" title="{smiley.SMILEY_DESC}" hspace="2" vspace="2" /></a>
						<!-- END smiley -->
					</td>
				</tr>

				<!-- IF S_SHOW_SMILEY_LINK -->
					<tr>
						<td align="center"><a class="nav" href="{U_MORE_SMILIES}" onclick="popup(this.href, 300, 350, '_phpbbsmilies'); return false;">{L_MORE_SMILIES}</a></td>
					</tr>
				<!-- ENDIF -->

				</table>
			<!-- ENDIF -->
			</td>
			<td class="row2" valign="top">
				<script type="text/javascript">
				// <![CDATA[
					var form_name = 'postform';
					var text_name = 'message';
				// ]]]]><![CDATA[>
				</script>

				<table width="100%" cellspacing="0" cellpadding="0" border="0">
				<!-- INCLUDE posting_buttons.html -->
				<tr>
					<td valign="top" style="width: 100%;"><textarea name="message" rows="15" cols="76" tabindex="3" onselect="storeCaret(this);" onclick="storeCaret(this);" onkeyup="storeCaret(this);" onfocus="initInsertions();" style="width: 98%;">{MESSAGE}</textarea></td>
					<!-- IF S_BBCODE_ALLOWED -->
					<td width="80" align="center" valign="top">
						<script type="text/javascript">
						// <![CDATA[
							colorPalette('v', 7, 6)
						// ]]]]><![CDATA[>
						</script>
					</td>
					<!-- ENDIF -->
				</tr>
				</table>
			</td>
		</tr>
		<!-- IF CAPTCHA_TEMPLATE and S_CONFIRM_CODE -->
			<!-- INCLUDE {CAPTCHA_TEMPLATE} -->
		<!-- ENDIF -->]]></action>
			</edit>
			<edit>
				<find><![CDATA[				<input class="btnmain" type="submit" accesskey="s" tabindex="6" name="post" value="{L_SUBMIT}" />&nbsp;
				<input class="btnlite" type="submit" accesskey="f" tabindex="7" name="full_editor" value="{L_FULL_EDITOR}" />]]></find>
				<action type="replace-with"><![CDATA[				<input class="btnlite" type="submit" tabindex="4" name="preview" value="{L_PREVIEW}" />&nbsp;
				<input class="btnmain" type="submit" accesskey="s" tabindex="5" name="post" value="{L_SUBMIT}" />&nbsp;
				<!-- IF not S_SHOW_ATTACH_BOX and not S_SHOW_POLL_BOX -->
					<!-- IF S_SAVE_ALLOWED --><input class="btnlite" type="submit" accesskey="k" tabindex="6" name="save" value="{L_SAVE}" />&nbsp;<!-- ENDIF -->
				<!-- ENDIF -->
				<input class="btnlite" type="submit" accesskey="c" tabindex="6" name="cancel" value="{L_CANCEL}" />]]></action>
			</edit>
		</open>

		<open src="styles/subsilver2/template/ucp_prefs_view.html">
			<edit>
				<find><![CDATA[<!-- IF S_CHANGE_CENSORS -->
	<tr>
		<td class="row1" width="50%"><b class="genmed">{L_DISABLE_CENSORS}:</b></td>
		<td class="row2"><input type="radio" class="radio" name="wordcensor" value="1"<!-- IF S_DISABLE_CENSORS --> checked="checked"<!-- ENDIF --> /><span class="gen">{L_YES}</span>&nbsp; &nbsp;<input type="radio" class="radio" name="wordcensor" value="0"<!-- IF not S_DISABLE_CENSORS --> checked="checked"<!-- ENDIF --> /><span class="gen">{L_NO}</span></td>
	</tr>
<!-- ENDIF -->]]></find>
				<action type="after-add"><![CDATA[<!-- IF S_QUICK_REPLY -->
	<tr>
		<td class="row1" width="50%"><b class="genmed">{L_VIEW_QUICK_REPLY}:</b></td>
		<td class="row2"><input type="radio" class="radio" name="quickreply" value="1"<!-- IF S_USER_QUICK_REPLY --> checked="checked"<!-- ENDIF --> /><span class="gen">{L_YES}</span>&nbsp; &nbsp;<input type="radio" class="radio" name="quickreply" value="0"<!-- IF not S_USER_QUICK_REPLY --> checked="checked"<!-- ENDIF --> /><span class="gen">{L_NO}</span></td>
	</tr>
<!-- ENDIF -->]]></action>
			</edit>
		</open>
		
		<open src="styles/subsilver2/template/viewtopic_body.html">
			<edit>
				<find><![CDATA[						<div class="postbody">{postrow.MESSAGE}</div>]]></find>
				<action type="after-add"><![CDATA[					<!-- IF postrow.U_QUOTE and postrow.DECODED_MESSAGE -->
						<div id="message_{postrow.POST_ID}" style="display: none;">{postrow.DECODED_MESSAGE}</div>
					<!-- ENDIF -->]]></action>
			</edit>
			<edit>
				<find><![CDATA[			<td><div class="gensmall" style="float: {S_CONTENT_FLOW_BEGIN};">&nbsp;<!-- IF postrow.U_POST_AUTHOR --><a href="{postrow.U_POST_AUTHOR}">{PROFILE_IMG}</a> <!-- ENDIF --> <!-- IF postrow.U_PM --><a href="{postrow.U_PM}">{PM_IMG}</a> <!-- ENDIF --> <!-- IF postrow.U_EMAIL --><a href="{postrow.U_EMAIL}">{EMAIL_IMG}</a> <!-- ENDIF -->&nbsp;</div> <div class="gensmall" style="float: {S_CONTENT_FLOW_END};"><!-- IF not S_IS_BOT --><!-- IF postrow.U_EDIT --><a href="{postrow.U_EDIT}">{EDIT_IMG}</a> <!-- ENDIF --> <!-- IF postrow.U_QUOTE --><a href="{postrow.U_QUOTE}">{QUOTE_IMG}</a> <!-- ENDIF --> <!-- ENDIF -->&nbsp;</div></td>]]></find>
				<inline-edit>
					<inline-find><![CDATA[<!-- IF postrow.U_QUOTE --><a href="{postrow.U_QUOTE}">{QUOTE_IMG}</a> <!-- ENDIF -->]]></inline-find>
					<inline-action type="replace-with"><![CDATA[<!-- IF S_QUICK_REPLY and postrow.DECODED_MESSAGE --><a href="#" onclick="addquote({postrow.POST_ID},'{postrow.POST_AUTHOR}'); return false;">{QUOTE_IMG}</a> <!-- ELSEIF postrow.U_QUOTE --><a href="{postrow.U_QUOTE}">{QUOTE_IMG}</a> <!-- ENDIF -->]]></inline-action>
				</inline-edit>
			</edit>
		</open>
		
		<diy-instructions lang="en">Purge forum cache and refresh style templates.</diy-instructions>
		<diy-instructions lang="pl">Wyczyść pamięć podręczną forum oraz odśwież szablony stylu.</diy-instructions>
	</action-group>
</mod>